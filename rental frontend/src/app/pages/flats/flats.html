<div class="page-bg">
  <!-- aapka poora existing HTML yahan rahe -->
<div class="container">

  <!-- Header -->
  <div class="page-header">
    <h2>ğŸ  Flats for Rent</h2>
    <div>
      <button class="btn btn-success" (click)="goToMyBookings()">My Bookings</button>&nbsp;
      <button class="btn btn-danger" (click)="logout()">Logout</button>
    </div>
  </div>

  <!-- Filters -->
  <div class="filter-box">
    <h3>ğŸ” Filters</h3>

    <!-- Rent Range -->
    <div>
      <label><strong>ğŸ’° Rent Range:</strong></label>
      <div style="display:flex; gap:10px; margin-top:5px;">
        <input type="number" [(ngModel)]="minRent" placeholder="Min Rent">
        <span>to</span>
        <input type="number" [(ngModel)]="maxRent" placeholder="Max Rent">
      </div>
    </div>

    <!-- Amenities -->
    <div style="margin-top:15px;">
      <label><strong>ğŸ¢ Amenities:</strong></label>

      <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); gap:10px; margin-top:10px;">
        <label><input type="checkbox" [(ngModel)]="filters.swimming_pool"> Swimming Pool</label>
        <label><input type="checkbox" [(ngModel)]="filters.car_parking"> Car Parking</label>
        <label><input type="checkbox" [(ngModel)]="filters.bike_parking"> Bike Parking</label>
        <label><input type="checkbox" [(ngModel)]="filters.gym"> Gym</label>
        <label><input type="checkbox" [(ngModel)]="filters.garden"> Garden</label>
      </div>
    </div>

    <!-- Buttons -->
    <div style="margin-top:15px; display:flex; gap:10px;">
      <button class="btn btn-primary" (click)="applyFilters()">Apply Filters</button>
      <button class="btn btn-secondary" (click)="clearFilters()">Clear Filters</button>
    </div>
  </div>

  <!-- Results Count -->
  <p class="primary"><strong>Found {{ filteredFlats.length }} flats</strong></p>

  <!-- Flats Grid -->
  <div class="flats-grid">

    <div class="flat-card" *ngFor="let flat of filteredFlats">

      <!-- Card Header -->
      <div class="flat-header">
        <h3>Apartment {{ flat.flat_no }}</h3>
        <p>{{ flat.location }}</p>
      </div>

      <!-- Price -->
      <div class="flat-price">
        â‚¹ {{ flat.rent | number }} / Month
      </div>

      <!-- Body -->
      <div class="flat-body">

        <!-- Info -->
        <div class="info-grid">
          <div>ğŸ“ {{ flat.area_sqft }} sq.ft</div>
          <div>ğŸ  1st Floor</div>
          <div>ğŸ›ï¸ {{ flat.bedrooms }} Bedrooms</div>
          <div>ğŸš¿ {{ flat.bathrooms }} Bathrooms</div>
        </div>

        <!-- Amenities -->
        <div class="info-grid">
          <div class="amenity success" *ngIf="flat.amenities.swimming_pool">ğŸŠ Swimming Pool</div>
          <div class="amenity success" *ngIf="flat.amenities.car_parking">ğŸš— Car Parking</div>
          <div class="amenity success" *ngIf="flat.amenities.bike_parking">ğŸš² Bike Parking</div>
          <div class="amenity danger" *ngIf="flat.amenities.gym">ğŸ’ª Gym</div>
        </div>

        <!-- Status -->
        <div class="status available" *ngIf="flat.available">âœ… Available for Rent</div>
        <div class="status unavailable" *ngIf="!flat.available">âŒ Not Available</div>

        <!-- Button -->
        <button class="btn btn-primary"
                (click)="bookFlat(flat.flat_no)"
                [disabled]="!flat.available">
          ğŸ“‹ {{ flat.available ? 'Book Now' : 'Not Available' }}
        </button>

      </div>
    </div>
  </div>

  <!-- No Results -->
  <div *ngIf="filteredFlats.length === 0" style="text-align:center; margin-top:40px;">
    <h3>ğŸ˜” No flats found</h3>
    <button class="btn btn-primary" (click)="clearFilters()">Clear Filters</button>
  </div>

  <!-- Popup -->
  <div class="popup-backdrop" *ngIf="showBookingPopup">
    <div class="popup">
      <h3>ğŸ“‹ Booking Status</h3>
      <p>{{ bookingMessage }}</p>
      <button class="btn btn-primary" (click)="closePopup()">OK</button>
    </div>
  </div>

</div>
</div>