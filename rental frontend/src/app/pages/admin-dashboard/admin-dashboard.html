<div class="page-bg">
  <div class="container">

    <!-- Header -->
    <div class="page-header">
      <h2>Admin Dashboard - Manage Bookings</h2>
      <button class="btn btn-danger" (click)="logout()">Logout</button>
    </div>

    <!-- No data -->
    <div *ngIf="bookings.length === 0" class="empty-box">
      <p>No bookings found.</p>
    </div>

    <!-- Table -->
    <div *ngIf="bookings.length > 0" class="table-wrapper">
      <table class="admin-table">
        <thead>
          <tr>
            <th>Booking ID</th>
            <th>User Email</th>
            <th>Flat No</th>
            <th>Status</th>
            <th>Booking Date</th>
            <th>Status Updated</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let booking of bookings">
            <td>{{ booking.booking_id }}</td>
            <td>{{ booking.user_email }}</td>
            <td>{{ booking.flat_no }}</td>

            <td>
              <span class="status"
                    [ngClass]="{
                      approved: booking.status === 'approved',
                      rejected: booking.status === 'rejected',
                      pending: booking.status === 'pending'
                    }">
                {{ booking.status | titlecase }}
              </span>
            </td>

            <td>{{ booking.created_at | date:'short' }}</td>

            <td>
              <span *ngIf="booking.updated_at">
                {{ booking.updated_at | date:'short' }}
              </span>
              <span *ngIf="!booking.updated_at" class="muted">-</span>
            </td>

            <td>
              <button *ngIf="booking.status === 'pending'"
                      class="btn btn-success btn-sm"
                      (click)="updateStatus(booking.booking_id, 'approved')">
                Approve
              </button>

              <button *ngIf="booking.status === 'pending'"
                      class="btn btn-danger btn-sm"
                      (click)="updateStatus(booking.booking_id, 'rejected')">
                Reject
              </button>

              <span *ngIf="booking.status !== 'pending'" class="muted">
                No actions
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>
